<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vienna Dashboard | Dr. B</title>
    <style>
        :root {
            --primary: #8B0000;
            --primary-light: #A52A2A;
            --bg-dark: #1a1a2e;
            --bg-card: #16213e;
            --text: #eaeaea;
            --text-muted: #a0a0a0;
            --accent: #e94560;
            --success: #00d26a;
            --warning: #ffc107;
            --info: #17a2b8;
            --border: #2a2a4a;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            min-height: 100vh;
            padding: 20px;
        }
        
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-light) 100%);
            padding: 1.5rem 2rem;
            border-radius: 12px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            font-size: 1.8rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .status-badge {
            background: var(--success);
            color: #000;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-badge.warning { background: var(--warning); }
        .status-badge.error { background: var(--accent); color: #fff; }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--border);
        }
        
        .card h2 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text);
        }
        
        .card h2 .icon { font-size: 1.3rem; }
        
        .task-list { list-style: none; }
        
        .task-list li {
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .task-list li:last-child { border-bottom: none; }
        
        .task-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .task-status.done { background: var(--success); }
        .task-status.active { background: var(--warning); animation: pulse 1.5s infinite; }
        .task-status.pending { background: var(--text-muted); }
        .task-status.blocked { background: var(--accent); }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .task-text { flex: 1; }
        .task-text.done { text-decoration: line-through; color: var(--text-muted); }
        
        .project-item {
            background: rgba(255,255,255,0.05);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .project-item h3 {
            font-size: 1rem;
            margin-bottom: 5px;
        }
        
        .project-item p {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        .progress-bar {
            height: 6px;
            background: var(--border);
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }
        
        .progress-bar .fill {
            height: 100%;
            background: var(--success);
            border-radius: 3px;
            transition: width 0.3s;
        }
        
        .idea-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
        }
        
        .idea-item:last-child { border-bottom: none; }
        
        .idea-item strong { color: var(--accent); }
        
        .log-entry {
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.9rem;
        }
        
        .log-entry:last-child { border-bottom: none; }
        
        .log-time {
            color: var(--text-muted);
            font-size: 0.8rem;
        }
        
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .stat-box {
            background: var(--bg-card);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 1px solid var(--border);
        }
        
        .stat-box .number {
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent);
        }
        
        .stat-box .label {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 5px;
        }
        
        .footer {
            text-align: center;
            margin-top: 30px;
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        .refresh-btn {
            background: var(--primary);
            color: #fff;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .refresh-btn:hover { background: var(--primary-light); }
    </style>
</head>
<body>
<script src="../auth.js"></script>
    <div class="header">
        <h1>ü´Ä Vienna Dashboard</h1>
        <div style="display: flex; gap: 10px; align-items: center;">
            <a href="../projects/case-logger/index.html" class="refresh-btn" style="text-decoration: none;">üìã Cases</a>
            <a href="../projects/research-dashboard/index.html" class="refresh-btn" style="text-decoration: none;">üî¨ Research</a>
            <span class="status-badge warning">OAuth Token Issue</span>
            <button class="refresh-btn" onclick="location.reload()">‚Üª Refresh</button>
        </div>
    </div>
    
    <div class="quick-stats">
        <div class="stat-box">
            <div class="number">7</div>
            <div class="label">Tasks Today</div>
        </div>
        <div class="stat-box">
            <div class="number">2</div>
            <div class="label">Completed</div>
        </div>
        <div class="stat-box">
            <div class="number">4</div>
            <div class="label">Active Projects</div>
        </div>
        <div class="stat-box">
            <div class="number">5</div>
            <div class="label">Ideas Queued</div>
        </div>
    </div>
    
    <div class="grid">
        <!-- Today's Tasks -->
        <div class="card">
            <h2><span class="icon">üìã</span> Today's Tasks (Feb 2)</h2>
            <ul class="task-list">
                <li>
                    <span class="task-status done"></span>
                    <span class="task-text done">Check Google Drive share</span>
                </li>
                <li>
                    <span class="task-status done"></span>
                    <span class="task-text done">Morning briefing (manual)</span>
                </li>
                <li>
                    <span class="task-status active"></span>
                    <span class="task-text">Build new dashboard</span>
                </li>
                <li>
                    <span class="task-status pending"></span>
                    <span class="task-text">Case Logger (functional)</span>
                </li>
                <li>
                    <span class="task-status pending"></span>
                    <span class="task-text">Twitter Trial Bot (draft)</span>
                </li>
                <li>
                    <span class="task-status blocked"></span>
                    <span class="task-text">Fix OAuth for cron jobs</span>
                </li>
                <li>
                    <span class="task-status pending"></span>
                    <span class="task-text">Set up overnight work routine</span>
                </li>
            </ul>
        </div>
        
        <!-- Active Projects -->
        <div class="card">
            <h2><span class="icon">üöÄ</span> Active Projects</h2>
            <div class="project-item">
                <h3>üìä Vienna Dashboard v2</h3>
                <p>Status tracking, projects, ideas, logs</p>
                <div class="progress-bar"><div class="fill" style="width: 60%"></div></div>
            </div>
            <div class="project-item">
                <h3>üìù Procedure Case Logger</h3>
                <p>Track TAVR, PCI, structural cases</p>
                <div class="progress-bar"><div class="fill" style="width: 20%"></div></div>
            </div>
            <div class="project-item">
                <h3>üê¶ Twitter Trial Bot</h3>
                <p>Auto-summarize cardiology trials for @ICPeteB</p>
                <div class="progress-bar"><div class="fill" style="width: 10%"></div></div>
            </div>
            <div class="project-item">
                <h3>üì∏ Surrey Clinic Instagram</h3>
                <p>20 posts for Dr. Maria's clinic (PAUSED)</p>
                <div class="progress-bar"><div class="fill" style="width: 35%"></div></div>
            </div>
        </div>
        
        <!-- Ideas Bank -->
        <div class="card">
            <h2><span class="icon">üí°</span> Ideas Bank</h2>
            <div class="idea-item">
                <strong>1.</strong> Research Paper Summarizer ‚Äî Drop PDF ‚Üí summary + tweet draft
            </div>
            <div class="idea-item">
                <strong>2.</strong> Renal Denervation Launch Kit ‚Äî Patient criteria, referral templates
            </div>
            <div class="idea-item">
                <strong>3.</strong> Automated CV Updater ‚Äî Track procedures, update CV automatically
            </div>
            <div class="idea-item">
                <strong>4.</strong> CME Tracker ‚Äî Log continuing education credits
            </div>
            <div class="idea-item">
                <strong>5.</strong> Voice Briefings ‚Äî Morning updates via audio
            </div>
        </div>
        
        <!-- Recent Activity -->
        <div class="card">
            <h2><span class="icon">üìú</span> Recent Activity</h2>
            <div class="log-entry">
                <div>‚úÖ Found Google Drive "Vi" folder</div>
                <div class="log-time">Feb 2, 4:52 AM</div>
            </div>
            <div class="log-entry">
                <div>‚ö†Ô∏è Morning briefing cron failed (OAuth)</div>
                <div class="log-time">Feb 2, 4:00 AM</div>
            </div>
            <div class="log-entry">
                <div>üñ®Ô∏è Printed DMV-002 form + checklist</div>
                <div class="log-time">Feb 1, 8:35 PM</div>
            </div>
            <div class="log-entry">
                <div>üìÅ Created NIGHTLY.md, CAPABILITIES.md, MORNING_IDEAS.md</div>
                <div class="log-time">Feb 1, 6:40 PM</div>
            </div>
            <div class="log-entry">
                <div>üé® Generated 7 clinic images in Gemini</div>
                <div class="log-time">Feb 1, 6:30 PM</div>
            </div>
        </div>
        
        <!-- Conversation Topics -->
        <div class="card">
            <h2><span class="icon">üí¨</span> Key Topics & Decisions</h2>
            <div class="log-entry">
                <div><strong>Nightly routine:</strong> Work on projects, self-improve, prep 5 morning ideas</div>
            </div>
            <div class="log-entry">
                <div><strong>Google Drive:</strong> "Vi" folder for sharing completed work</div>
            </div>
            <div class="log-entry">
                <div><strong>ToPrint folder:</strong> Set up ~/Documents/ToPrint for easy printing</div>
            </div>
            <div class="log-entry">
                <div><strong>Weather:</strong> Always in Celsius (Dr. B is Canadian)</div>
            </div>
            <div class="log-entry">
                <div><strong>Wake time:</strong> 3:30-4:30 AM PST</div>
            </div>
        </div>
        
        <!-- System Status -->
        <div class="card">
            <h2><span class="icon">‚öôÔ∏è</span> System Status</h2>
            <ul class="task-list">
                <li>
                    <span class="task-status done"></span>
                    <span class="task-text">Gateway running</span>
                </li>
                <li>
                    <span class="task-status done"></span>
                    <span class="task-text">Browser automation</span>
                </li>
                <li>
                    <span class="task-status blocked"></span>
                    <span class="task-text">OAuth token (expired)</span>
                </li>
                <li>
                    <span class="task-status done"></span>
                    <span class="task-text">iMessage connected</span>
                </li>
                <li>
                    <span class="task-status warning"></span>
                    <span class="task-text">Brave Search API (not configured)</span>
                </li>
                <li>
                    <span class="task-status done"></span>
                    <span class="task-text">Google Drive access</span>
                </li>
            </ul>
        </div>
    </div>
    
    <div class="footer">
        <p>Vienna v1.0 | Last updated: <span id="timestamp"></span> | Running on Vienna's Mac mini</p>
    </div>
    
    <script>
        document.getElementById('timestamp').textContent = new Date().toLocaleString('en-US', {
            weekday: 'short',
            month: 'short',
            day: 'numeric',
            hour: '2-digit',
            minute: '2-digit',
            timeZoneName: 'short'
        });
    </script>
</body>
</html>
